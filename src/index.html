<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      /* RE: 62.5% 
      See: https://www.sitepoint.com/understanding-and-using-rem-units-in-css */

      html {
        font-size: 62.5%;
      }

      body {
        font-family: Arial, Helvetica, sans-serif;
      }
    </style>
    <base href="/" />
    <link href="/style-px.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <form method="post" enctype="multipart/form-data" action="#">
      <input type="hidden" id="scheduled_for" name="scheduled_for" value="" />
      <div id="schedule-send-at"></div>
    </form>
    <script>
      const populateTimes = () => {
        return [
          { val: "1:00", label: "1:00 AM" },
          { val: "2:00", label: "2:00 AM" },
          { val: "3:00", label: "3:00 AM" }
        ];
      };

      window.schedulerOptions = {
        init: data => {
          const { dayjs, defaultState } = data;

          const firstDay = dayjs("2020-02-15");
          lastAvailableDate = dayjs(firstDay).add(3, "months");

          return {
            today: firstDay,
            firstAvailableDate: firstDay,
            lastAvailableDate: lastAvailableDate,
            date: dayjs(firstDay).format("YYYY-MM-DD"),
            time: "",
            time_values: populateTimes(),
            selected: [dayjs(firstDay).format("YYYY-MM-DD")],
            focusedDayNum: dayjs(firstDay).format("D"),
            updateMessage: "",
            _24hr: "en",
            errors: ""
          };
        },
        isBlockedDay: day => {
          const data = {
            blockedDays: [1, 3, 4],
            dateRange: 80,
            availableTimes: [
              { val: "16:00", label: "4:00 PM" },
              { val: "17:00", label: "5:00 PM" }
            ]
          };

          if (data.blockedDays && data.blockedDays.indexOf(day.$W) > -1) {
            return true;
          }
        }
      };
    </script>

    <script>
      setTimeout(function() {
        window.renderCalendar("schedule-send-at");
      }, 2000);

      setTimeout(function() {
        const myEvent = new CustomEvent("build", {
          detail: {
            type: "TIME_VALUES",
            payload: [
              { val: "1:00", label: "1:00 PM" },
              { val: "2:00", label: "2:00 PM" },
              { val: "3:00", label: "3:00 PM" },
              { val: "4:00", label: "4:00 PM" }
            ]
          }
        });
        window.dispatchEvent(myEvent);
      }, 10000);
    </script>
  </body>
</html>
